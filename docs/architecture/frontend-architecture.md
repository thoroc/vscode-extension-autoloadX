# Frontend Architecture

## Component Architecture

The user interface for AutoLoadX is built using the native VSCode UI Toolkit, not a web framework like React or Vue.
There are no "components" in the traditional sense. Instead, the UI is composed of elements managed by the
`UserInterfaceService`.

### Component Organization

The UI logic is not organized into a file-based component tree. It is encapsulated within the `UserInterfaceService`,
which has methods for each distinct UI interaction.

```text
src/
    └── services/
        └── userInterfaceService.ts  // Manages all UI interactions
```

### Component Template

There are no component templates. All UI is created programmatically using the `vscode.window` API.

## State Management Architecture

State management is handled locally and is transient. There is no need for a global state management library.

### State Structure

The primary state is the list of `ExtensionRecommendation` objects, which is generated by the `RecommendationEngine` and
passed to the `UserInterfaceService`. This state exists only for the duration of the core workflow.

```typescript
// Example of transient state being passed
const recommendations = await recommendationEngine.generateRecommendations(contexts);
const userApproved = await uiService.showApprovalPrompt(recommendations);
```

### State Management Patterns

- **Local State:** All state is managed within the scope of the function that is executing the core workflow.

## Routing Architecture

There is no routing in the traditional web sense. User navigation and feature access are handled through the VSCode
Command Palette.

## Frontend Services Layer

The `UserInterfaceService` acts as the services layer for all UI-related operations.

### API Client Setup

There is no API client. The service directly uses the `vscode.window` object.

```typescript
// src/services/userInterfaceService.ts

import * as vscode from "vscode";

export class UserInterfaceService {
  private outputChannel: vscode.OutputChannel;

  constructor() {
    this.outputChannel = vscode.window.createOutputChannel("AutoLoadX");
  }

  // ... methods
}
```

### Service Example

This example shows how the `showApprovalPrompt` method would be implemented.

```typescript
// src/services/userInterfaceService.ts

public async showApprovalPrompt(recommendations: ExtensionRecommendation[]): Promise<boolean> {
    const toEnable = recommendations.filter(r => r.action === 'enable').map(r => r.friendlyName).join(', ');
    const toDisable = recommendations.filter(r => r.action === 'disable').map(r => r.friendlyName).join(', ');

    let message = 'AutoLoadX recommends the following changes:\n';
    if (toEnable) {
        message += `\nEnable: ${toEnable}`;
    }
    if (toDisable) {
        message += `\nDisable: ${toDisable}`;
    }

    const decision = await vscode.window.showInformationMessage(
        message,
        { modal: true },
        'Apply'
    );

    return decision === 'Apply';
}

public logAction(message: string): void {
    this.outputChannel.appendLine(`[${new Date().toISOString()}] ${message}`);
}
```
